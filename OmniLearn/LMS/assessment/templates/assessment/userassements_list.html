{% extends "assessment/base.html" %}
{% block body_block %}

<div class="mt-5"></div>
<form id="resultForm" class="d-none">
  {{form.as_p}}
</form>
<div class="row">
  <div class="col-sm-12 col-xs-12 col-lg-3 col-xl-3">
    <aside class="sidebar mb-5">
      <nav>
        <ul>
          {% if myAssments|length > 0 %}
            {% for assessment in myAssments reversed %}
              {% if forloop.counter == 1 %}
                <li><a class="findResult" id={{assessment.pk}}><span id="firstClick"><b>{{assessment.created_date|date:"d M, Y, h:i A T"}}</b></span></a></li>
              {% else %}
                <li><a class="findResult" id={{assessment.pk}}><b>{{assessment.created_date|date:"d M, Y, h:i A T"}}</b></a></li>
              {% endif %}
            {% endfor %}
          {% endif %}
        </ul>
      </nav>
    </aside>
  </div>
  <div class="col-sm-12 col-xs-12 col-lg-9 col-xl-9">
    <div id="overlay">
      <div class="loader"></div>
    </div>
    <h3 id="assessmentTime"></h3>
    <div class="form-result">
      <p><b>Based on your responses, Your scores on various parameters of Wellbeing are as follows:</b></p>
      <table id="result-table" class="table table-striped table-bordered">
        <tbody>
        </tbody>
      </table>
      <p>&nbsp;</p>
      <p id="levelOfStressSentance1"></p>
      <p id="levelOfStressSentance2"></p>
      <p><b>Based on your responses & preference, you may begin your navigation journey from:</b></p>
      <div class="insprio">

      </div>
      <p><b>Disclaimer: Test results on the self-assessment scale do not reflect any particular diagnosis or course of treatment.
        They are meant as a tool to help assess your current level of Stress and Wellbeing. Should you have any further concerns about your current well-being, you may contact a certified medical physician.</b></p>
    </div>
  </div>
</div>
<div class="d-none">
  <form id="resultForm">
    <input type="number" id="id_A1">
    <input type="number" id="id_A2">
    <input type="number" id="id_A3">
    <input type="number" id="id_M1">
    <input type="number" id="id_M2">
    <input type="number" id="id_M3">
    <input type="number" id="id_N1">
    <input type="number" id="id_N2">
    <input type="number" id="id_N3">
    <input type="number" id="id_E1">
    <input type="number" id="id_E2">
    <input type="number" id="id_E3">
    <input type="number" id="id_H1">
    <input type="number" id="id_H2">
    <input type="number" id="id_H3">
    <input type="number" id="id_R1">
    <input type="number" id="id_R2">
    <input type="number" id="id_R3">
    <input type="number" id="id_P1">
    <input type="number" id="id_P2">
    <input type="number" id="id_P3">
    <input type="number" id="id_Lon">
    <input type="number" id="id_hap">

    <input type="text" id="id_Q1">
    <input type="text" id="id_Q2">
    <input type="text" id="id_Q3">
    <input type="text" id="id_Q4">
    <input type="text" id="id_Q5">
    <input type="text" id="id_Q6">
    <input type="text" id="id_Q7">
    <input type="text" id="id_Q8">
    <input type="text" id="id_Q9">
    <input type="text" id="id_Q10">
    <input type="text" id="id_Q11">
    <input type="text" id="id_Q12">

    <input type="checkbox" id="CHQ1">
    <input type="checkbox" id="CHQ2">
    <input type="checkbox" id="CHQ3">
    <input type="checkbox" id="CHQ4">
    <input type="checkbox" id="CHQ5">
    <input type="checkbox" id="CHQ6">
    <input type="checkbox" id="CHQ7">
  </form>
</div>
<script type="text/javascript">
  $(document).ready(function(){
    $("#firstClick").closest(".findResult").click();
  });
  $(".findResult").on("click",function(){
    $("#overlay").show();
    var timeText = $(this).text();
    $(".findResult").removeClass("activeLi");
    $(this).addClass("activeLi");
    $.ajax({
      url: '/ajax/userResult/',
      data: {
        'pk':$(this).attr("id")
      },
      dataType:'json',
      success: function(data){
        $("#assessmentTime").html(timeText);
        $("#id_A1").val(data.A1);
        $("#id_A2").val(data.A2);
        $("#id_A3").val(data.A3);
        $("#id_M1").val(data.M1);
        $("#id_M2").val(data.M2);
        $("#id_M3").val(data.M3);
        $("#id_P1").val(data.P1);
        $("#id_P2").val(data.P2);
        $("#id_P3").val(data.P3);
        $("#id_R1").val(data.R1);
        $("#id_R2").val(data.R2);
        $("#id_R3").val(data.R3);
        $("#id_H1").val(data.H1);
        $("#id_H2").val(data.H2);
        $("#id_H3").val(data.H3);
        $("#id_N1").val(data.N1);
        $("#id_N2").val(data.N2);
        $("#id_N3").val(data.N3);
        $("#id_E1").val(data.E1);
        $("#id_E2").val(data.E2);
        $("#id_E3").val(data.E3);
        $("#id_hap").val(data.hap);
        $("#id_Lon").val(data.Lon);

        $("#id_Q1").val(data.Q1);
        $("#id_Q2").val(data.Q2);
        $("#id_Q3").val(data.Q3);
        $("#id_Q4").val(data.Q4);
        $("#id_Q5").val(data.Q5);
        $("#id_Q6").val(data.Q6);
        $("#id_Q7").val(data.Q7);
        $("#id_Q8").val(data.Q8);
        $("#id_Q9").val(data.Q9);
        $("#id_Q10").val(data.Q10);
        $("#id_Q11").val(data.Q11);
        $("#id_Q12").val(data.Q12);
        debugger;
        $("#CHQ1").prop('checked',data.CQ1);
        $("#CHQ2").prop('checked',data.CQ2);
        $("#CHQ3").prop('checked',data.CQ3);
        $("#CHQ4").prop('checked',data.CQ4);
        $("#CHQ5").prop('checked',data.CQ5);
        $("#CHQ6").prop('checked',data.CQ6);
        $("#CHQ7").prop('checked',data.CQ7);
        doMentalWellbeingAssessment();
        setTimeout(function(){$("#overlay").hide();},500);
      }
    });
  });
</script>
{% endblock %}
